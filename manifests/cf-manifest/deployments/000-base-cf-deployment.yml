meta:
  environment: (( grab terraform_outputs.environment ))

name: (( grab meta.environment ))
director_uuid: ~

releases:
  - name: cf
    version: 235
    url: https://bosh.io/d/github.com/cloudfoundry/cf-release?v=235
    sha1: a4ab2d7a2912b8c700ef4b8a45e7f688127930b6
  - name: nginx
    version: 2
    url: https://s3.amazonaws.com/nginx-release/nginx-2.tgz
    sha1: 667cc1a0f9117bdb4b217ee2b76dc20e61371c02
  - name: diego
    version: 0.1467.0
    url: https://bosh.io/d/github.com/cloudfoundry-incubator/diego-release?v=0.1467.0
    sha1: 64af2b1b99f0ff771e3e60daacbe5fd3b48d2ddc
  - name: garden-linux
    version: 0.337.0
    url: https://bosh.io/d/github.com/cloudfoundry-incubator/garden-linux-release?v=0.337.0
    sha1: d1d81d56c3c07f6f9f04ebddc68e51b8a3cf541d
  - name: etcd
    version: 45
    url: https://bosh.io/d/github.com/cloudfoundry-incubator/etcd-release?v=45
    sha1: c166c0e34fa2ebdc42585075409f9b84aa4d14d8
  - name: paas-haproxy
    version: 0.0.2
  - name: paas-os-conf
    version: 7

addons:
  - name: os-configuration
    jobs:
    - name: script_runner
      release: paas-os-conf
    properties:
      script_runner:
        script: |
          #!/bin/bash
          ifconfig eth0 mtu 1500
          echo "#!/bin/bash\nifconfig eth0 mtu 1500\n" > /etc/dhcp/dhclient-exit-hooks.d/set_mtu

compilation:
  workers: 6
  network: cf1
  reuse_compilation_vms: true
  cloud_properties:
    instance_type: c3.large
    availability_zone: (( grab meta.zones.z1 ))
    iam_instance_profile: bosh-director

update:
  canaries: 0
  max_in_flight: 2
  canary_watch_time: 30000-600000
  update_watch_time: 5000-600000
  serial: false
